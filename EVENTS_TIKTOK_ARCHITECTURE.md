# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã /events –≤ —Å—Ç–∏–ª–µ TikTok

## üéØ –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–°—Ç—Ä–∞–Ω–∏—Ü–∞ `/events` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞ –≤ —Å—Ç–∏–ª–µ TikTok:

- –û–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω
- –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª/—Å–≤–∞–π–ø –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω, –º–µ–Ω—è—é—â–∏–π—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏ —Å–æ–±—ã—Ç–∏—è
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞ —Ñ–æ–Ω–µ (–ø–ª–∞–Ω–µ—Ç—ã, –∏–∫–æ–Ω–∫–∏, —á–∞—Å—Ç–∏—Ü—ã)
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ" –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ

---

## üìê –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
/events (page.tsx)
‚îî‚îÄ‚îÄ EventsTikTokFeed
    ‚îú‚îÄ‚îÄ EventsTikTokContainer (–≥–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)
    ‚îÇ   ‚îú‚îÄ‚îÄ DynamicBackground (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω)
    ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AnimatedObjects (–ø–ª–∞–Ω–µ—Ç—ã/–æ–±—ä–µ–∫—Ç—ã)
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GradientOverlay (–≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –æ–≤–µ—Ä–ª–µ–π)
    ‚îÇ   ‚îú‚îÄ‚îÄ EventSlide (–æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è)
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ EventCard (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
    ‚îÇ   ‚îú‚îÄ‚îÄ SimilarEventsButton (–∫–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ")
    ‚îÇ   ‚îî‚îÄ‚îÄ LoadingIndicator (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏)
    ‚îî‚îÄ‚îÄ EventsFeedProvider (–∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º)
```

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1. EventsTikTokFeed (–≥–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/app/(main)/events/EventsTikTokFeed.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `useInfiniteQuery`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏–º –∏–Ω–¥–µ–∫—Å–æ–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ "–ø–æ—Ö–æ–∂–∏—Ö —Å–æ–±—ã—Ç–∏–π"

**–°–æ—Å—Ç–æ—è–Ω–∏–µ**:

```typescript
interface EventsTikTokFeedState {
  events: EventItem[];
  currentIndex: number; // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –≤–∏–¥–∏–º–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
  filteredByTheme: ThemeName | null; // –§–∏–ª—å—Ç—Ä –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ
  isLoading: boolean;
  hasMore: boolean;
}
```

**–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞**:

```typescript
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç useInfiniteQuery –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏
const { data, fetchNextPage, hasNextPage } = useInfiniteQuery({
  queryKey: ['eventsTikTok', selectedGraphId, filteredByTheme],
  queryFn: ({ pageParam = 0 }) =>
    EventService.getUpcomingEvents(selectedGraphId, pageParam, EVENTS_PER_PAGE),
  getNextPageParam: (lastPage, allPages) => {
    // –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  },
});

// –¢–µ–∫—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
const currentEvent = events[currentIndex];
const currentTheme = getThemeName(currentEvent);
```

---

### 2. EventsTikTokContainer

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/components/events/EventsTikTokContainer.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º –∏ snap-—Ç–æ—á–∫–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π —Å–∫—Ä–æ–ª–ª–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—Å–æ—Ç–æ–π –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–ª–∞–π–¥–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞**:

```typescript
<div className={styles.container}>
  <DynamicBackground theme={currentTheme} />
  <div className={styles.slidesContainer}>
    {events.map((event, index) => (
      <EventSlide
        key={event._id}
        event={event}
        isActive={index === currentIndex}
        onIntersect={() => setCurrentIndex(index)}
      />
    ))}
  </div>
  <SimilarEventsButton currentTheme={currentTheme} onFilterChange={handleFilterChange} />
</div>
```

**CSS (snap-scroll)**:

```scss
.container {
  height: 100vh;
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–æ–ª–ª–±–∞—Ä–∞ –¥–ª—è —á–∏—Å—Ç–æ–≥–æ –≤–∏–¥–∞
  scrollbar-width: none;
  -ms-overflow-style: none;
  &::-webkit-scrollbar {
    display: none;
  }
}

.slidesContainer {
  display: flex;
  flex-direction: column;
}

.slide {
  height: 100vh;
  scroll-snap-align: start;
  scroll-snap-stop: always;
  position: relative;
}
```

---

### 3. DynamicBackground

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/components/events/DynamicBackground/DynamicBackground.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å–º–µ–Ω–∞ —Ñ–æ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏
- –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Ç–µ–º–∞–º–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```typescript
const DynamicBackground = ({ theme }: { theme: ThemeName }) => {
  const themeData = getPastelTheme(theme);

  return (
    <motion.div
      className={styles.background}
      style={{
        background: themeData.headerBgLight, // –∏–ª–∏ headerBgDark –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã
      }}
      animate={{
        background: themeData.headerBgLight,
      }}
      transition={{ duration: 0.8, ease: 'easeInOut' }}>
      <AnimatedObjects theme={theme} />
      <GradientOverlay theme={theme} />
    </motion.div>
  );
};
```

**–°—Ç–∏–ª–∏**:

```scss
.background {
  position: fixed;
  inset: 0;
  z-index: 0;
  // –ì—Ä–∞–¥–∏–µ–Ω—Ç –±–µ—Ä–µ—Ç—Å—è –∏–∑ pastelTheme.ts
}
```

---

### 4. AnimatedObjects

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/components/events/DynamicBackground/AnimatedObjects.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º–∞—Ç–∏–∫–∏
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–≤–∏–∂–µ–Ω–∏—è (–ø–ª–∞–Ω–µ—Ç—ã, –∏–∫–æ–Ω–∫–∏, —á–∞—Å—Ç–∏—Ü—ã)

**–û–±—ä–µ–∫—Ç—ã –ø–æ —Ç–µ–º–∞–º**:

- **–ú—É–∑—ã–∫–∞**: –Ω–æ—Ç—ã, –∑–≤—É–∫–æ–≤—ã–µ –≤–æ–ª–Ω—ã, –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **–ë–∏–∑–Ω–µ—Å**: –≥—Ä–∞—Ñ–∏–∫–∏, —Å—Ç—Ä–µ–ª–∫–∏ —Ä–æ—Å—Ç–∞, –¥–∏–∞–≥—Ä–∞–º–º—ã
- **IT/–ù–∞—É–∫–∞**: –∫–æ–¥—ã, —Ñ–æ—Ä–º—É–ª—ã, —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏
- **–ò—Å–∫—É—Å—Å—Ç–≤–æ**: –∫–∏—Å—Ç–∏, –ø–∞–ª–∏—Ç—Ä—ã, –∫–∞—Ä–∞–Ω–¥–∞—à–∏
- **–°–ø–æ—Ä—Ç**: –º—è—á–∏, –º–µ–¥–∞–ª–∏, —Å–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –∏–∫–æ–Ω–∫–∏
- –ò —Ç.–¥.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å Framer Motion**:

```typescript
const AnimatedObjects = ({ theme }: { theme: ThemeName }) => {
  const objects = getObjectsForTheme(theme); // –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –¥–ª—è —Ç–µ–º—ã

  return (
    <>
      {objects.map((object, index) => (
        <motion.div
          key={index}
          className={styles.object}
          style={{
            ...object.initialPosition,
          }}
          animate={{
            x: object.initialPosition.x + object.movementRange.x,
            y: object.initialPosition.y + object.movementRange.y,
            rotate: object.rotation ? 360 : 0,
          }}
          transition={{
            duration: object.duration || 20,
            repeat: Infinity,
            ease: 'linear',
          }}>
          {object.icon}
        </motion.div>
      ))}
    </>
  );
};
```

**–ü—Ä–∏–º–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤**:

```typescript
function getObjectsForTheme(theme: ThemeName): AnimatedObject[] {
  switch (theme) {
    case '–ú—É–∑—ã–∫–∞':
      return [
        {
          icon: <Music size={60} />,
          initialPosition: { x: '10%', y: '20%' },
          movementRange: { x: 50, y: 100 },
          duration: 25,
        },
        {
          icon: <Music size={40} />,
          initialPosition: { x: '80%', y: '60%' },
          movementRange: { x: -30, y: 80 },
          duration: 30,
        },
        // –ë–æ–ª—å—à–µ –æ–±—ä–µ–∫—Ç–æ–≤...
      ];
    case '–ë–∏–∑–Ω–µ—Å':
      return [
        {
          icon: <TrendingUp size={50} />,
          initialPosition: { x: '15%', y: '40%' },
          movementRange: { x: 80, y: 50 },
          duration: 20,
        },
        // ...
      ];
    default:
      return []; // –ë–µ–∑ —Ç–µ–º–∞—Ç–∏–∫–∏ - –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
  }
}
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**:

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `will-change` –¥–ª—è GPU-—É—Å–∫–æ—Ä–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤ (3-5 –Ω–∞ —Ç–µ–º—É)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CSS `transform` –≤–º–µ—Å—Ç–æ `top/left`

---

### 5. EventSlide

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/components/events/EventSlide.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –û–±–µ—Ä—Ç–∫–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –≤—ã—Å–æ—Ç–æ–π
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞ —á–µ—Ä–µ–∑ Intersection Observer
- –ü–µ—Ä–µ–¥–∞—á–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º —Å–æ–±—ã—Ç–∏–∏ –≤ DynamicBackground

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```typescript
const EventSlide = ({
  event,
  isActive,
  onIntersect,
}: {
  event: EventItem;
  isActive: boolean;
  onIntersect: () => void;
}) => {
  const slideRef = useRef<HTMLDivElement>(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          onIntersect();
        }
      },
      { threshold: 0.5 }, // –°–æ–±—ã—Ç–∏–µ –∞–∫—Ç–∏–≤–Ω–æ, –∫–æ–≥–¥–∞ 50% –≤–∏–¥–Ω–æ
    );

    if (slideRef.current) {
      observer.observe(slideRef.current);
    }

    return () => observer.disconnect();
  }, [onIntersect]);

  return (
    <div ref={slideRef} className={styles.slide}>
      <EventCard event={event} />
    </div>
  );
};
```

---

### 6. SimilarEventsButton

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ**: `src/components/events/SimilarEventsButton.tsx`

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å**:

- –ü–æ–∫–∞–∑ –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ" –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–∫—É—â–µ–π —Ç–µ–º–∞—Ç–∏–∫–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ –ø—Ä–∏ –∫–ª–∏–∫–µ
- –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞ –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ –æ–±—â–µ–º—É –ø–æ—Ç–æ–∫—É

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```typescript
const SimilarEventsButton = ({
  currentTheme,
  isFiltered,
  onFilterChange,
}: {
  currentTheme: ThemeName;
  isFiltered: boolean;
  onFilterChange: (theme: ThemeName | null) => void;
}) => {
  const handleClick = () => {
    if (isFiltered) {
      // –°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–∞ - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
      onFilterChange(null);
    } else {
      // –§–∏–ª—å—Ç—Ä—É–µ–º –ø–æ —Ç–µ–∫—É—â–µ–π —Ç–µ–º–∞—Ç–∏–∫–µ
      onFilterChange(currentTheme);
    }
  };

  return (
    <motion.button
      className={styles.button}
      onClick={handleClick}
      whileHover={{ scale: 1.05 }}
      whileTap={{ scale: 0.95 }}>
      {isFiltered ? '–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ' : '–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ'}
    </motion.button>
  );
};
```

**–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**:

```scss
.button {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 100;
  padding: 12px 24px;
  border-radius: 24px;
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  // ...
}
```

---

## üîÑ –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–æ–±—ã—Ç–∏–π

### –ú–µ—Ö–∞–Ω–∏–∑–º —Å–∫—Ä–æ–ª–ª–∞

1. **CSS Scroll Snap**: –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∏–≤—è–∑–∫—É –∫ –∫–∞–∂–¥–æ–º—É —Å–ª–∞–π–¥—É
2. **Intersection Observer**: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π —Å–ª–∞–π–¥ –¥–ª—è —Å–º–µ–Ω—ã —Ñ–æ–Ω–∞
3. **Preloading**: –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–≥–æ/–ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å–æ–±—ã—Ç–∏—è

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞

```typescript
const [currentIndex, setCurrentIndex] = useState(0);

useEffect(() => {
  const observers: IntersectionObserver[] = [];

  slides.forEach((slide, index) => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting && entry.intersectionRatio > 0.5) {
          setCurrentIndex(index);
        }
      },
      { threshold: [0.5] },
    );

    observer.observe(slide);
    observers.push(observer);
  });

  return () => {
    observers.forEach((obs) => obs.disconnect());
  };
}, [events]);
```

### –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö

```typescript
// –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–ª–æ—Å—å 3 —Å–æ–±—ã—Ç–∏—è
useEffect(() => {
  if (currentIndex >= events.length - 3 && hasNextPage && !isFetchingNextPage) {
    fetchNextPage();
  }
}, [currentIndex, events.length, hasNextPage, isFetchingNextPage]);
```

---

## üé® –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–º–µ–Ω—ã —Ñ–æ–Ω–∞

```typescript
const DynamicBackground = ({ theme }: { theme: ThemeName }) => {
  const themeData = getPastelTheme(theme);
  const isDark = useTheme(); // –•—É–∫ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º—ã (light/dark)

  const backgroundStyle = isDark ? themeData.headerBgDark : themeData.headerBgLight;

  return (
    <motion.div
      className={styles.background}
      style={{
        background: backgroundStyle,
      }}
      animate={{
        background: backgroundStyle,
      }}
      transition={{
        duration: 0.8,
        ease: 'easeInOut',
      }}>
      {/* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã */}
    </motion.div>
  );
};
```

### –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã

- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 0.8s –¥–ª—è –ø–ª–∞–≤–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞
- **Easing**: `easeInOut` –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–µ–Ω–∏—è
- **GPU-—É—Å–∫–æ—Ä–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `transform` –∏ `opacity` –≤–º–µ—Å—Ç–æ –¥—Ä—É–≥–∏—Ö —Å–≤–æ–π—Å—Ç–≤

---

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### Touch —Å–æ–±—ã—Ç–∏—è (swipe)

```typescript
const handleTouchStart = (e: TouchEvent) => {
  touchStartY.current = e.touches[0].clientY;
};

const handleTouchEnd = (e: TouchEvent) => {
  const touchEndY = e.changedTouches[0].clientY;
  const diff = touchStartY.current - touchEndY;

  if (Math.abs(diff) > 50) {
    // –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è swipe
    if (diff > 0 && currentIndex < events.length - 1) {
      // Swipe –≤–≤–µ—Ä—Ö - —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
      scrollToSlide(currentIndex + 1);
    } else if (diff < 0 && currentIndex > 0) {
      // Swipe –≤–Ω–∏–∑ - –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–±—ã—Ç–∏–µ
      scrollToSlide(currentIndex - 1);
    }
  }
};
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞

```typescript
const scrollToSlide = (index: number) => {
  const slideElement = slideRefs.current[index];
  if (slideElement) {
    slideElement.scrollIntoView({
      behavior: 'smooth',
      block: 'start',
    });
  }
};
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–±—ã—Ç–∏–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `react-window` –∏–ª–∏ `react-virtual`:

```typescript
import { useVirtualizer } from '@tanstack/react-virtual';

const virtualizer = useVirtualizer({
  count: events.length,
  getScrollElement: () => containerRef.current,
  estimateSize: () => window.innerHeight,
  overscan: 2, // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º 2 —Å–æ–±—ã—Ç–∏—è —Å–≤–µ—Ä—Ö—É –∏ —Å–Ω–∏–∑—É
});
```

### 2. Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```typescript
// –í EventCard –∏—Å–ø–æ–ª—å–∑—É–µ–º next/image —Å lazy loading
<Image src={event.image} alt={event.name} loading="lazy" placeholder="blur" />
```

### 3. –ú–µ–º–æ–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```typescript
const EventSlide = React.memo(
  ({ event, isActive, onIntersect }) => {
    // ...
  },
  (prevProps, nextProps) => {
    return prevProps.event._id === nextProps.event._id && prevProps.isActive === nextProps.isActive;
  },
);
```

### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `will-change: transform` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `transform` –∏ `opacity` –≤–º–µ—Å—Ç–æ –¥—Ä—É–≥–∏—Ö —Å–≤–æ–π—Å—Ç–≤
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–π –ø—Ä–∏ `prefers-reduced-motion`

```scss
@media (prefers-reduced-motion: reduce) {
  .object {
    animation: none;
  }
}
```

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

1. –°–æ–∑–¥–∞—Ç—å `EventsTikTokFeed.tsx` —Å –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `EventsTikTokContainer` —Å CSS snap-scroll
3. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `EventCard`
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ `useInfiniteQuery`

### –§–∞–∑–∞ 2: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω

1. –°–æ–∑–¥–∞—Ç—å `DynamicBackground` –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–µ–º –∏–∑ `pastelTheme.ts`
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —á–µ—Ä–µ–∑ Framer Motion
4. –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã

### –§–∞–∑–∞ 3: –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ UX

1. –†–∞—Å—à–∏—Ä–∏—Ç—å `AnimatedObjects` –¥–ª—è –≤—Å–µ—Ö —Ç–µ–º
2. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ"
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å touch/swipe —Å–æ–±—ã—Ç–∏—è –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –§–∞–∑–∞ 4: –ü–æ–ª–∏—Ä–æ–≤–∫–∞

1. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

---

## üìã –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ü–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ EventsTikTokFeed

```typescript
'use client';

import React, { useState, useEffect, useMemo, useRef } from 'react';
import { useInfiniteQuery } from '@tanstack/react-query';
import { EventService } from '@/services/event.service';
import { EventItem } from '@/types/schedule.interface';
import { getThemeName, ThemeName } from '@/components/shared/EventCard/pastelTheme';
import { useSelectedGraphId } from '@/stores/useUIStore';
import EventsTikTokContainer from '@/components/events/EventsTikTokContainer';
import EventSlide from '@/components/events/EventSlide';
import DynamicBackground from '@/components/events/DynamicBackground/DynamicBackground';
import SimilarEventsButton from '@/components/events/SimilarEventsButton';

const EVENTS_PER_PAGE = 20;

export default function EventsTikTokFeed() {
  const selectedGraphId = useSelectedGraphId();
  const [currentIndex, setCurrentIndex] = useState(0);
  const [filteredByTheme, setFilteredByTheme] = useState<ThemeName | null>(null);

  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, isLoading } = useInfiniteQuery({
    queryKey: ['eventsTikTok', selectedGraphId, filteredByTheme],
    queryFn: async ({ pageParam = 0 }) => {
      if (!selectedGraphId) return { data: [] };
      return await EventService.getUpcomingEvents(selectedGraphId, pageParam, EVENTS_PER_PAGE);
    },
    enabled: !!selectedGraphId,
    getNextPageParam: (lastPage, allPages) => {
      const events = lastPage?.data || [];
      if (events.length < EVENTS_PER_PAGE) return undefined;
      return allPages.length * EVENTS_PER_PAGE;
    },
    initialPageParam: 0,
  });

  const events = useMemo(() => {
    if (!data?.pages) return [];
    let allEvents = data.pages.flatMap((page) => page?.data || []);

    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–µ—Å–ª–∏ –Ω–µ—Ç API —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏)
    if (filteredByTheme) {
      allEvents = allEvents.filter((event) => {
        const eventTheme = getThemeName(event);
        return eventTheme === filteredByTheme;
      });
    }

    return allEvents;
  }, [data?.pages, filteredByTheme]);

  const currentEvent = events[currentIndex];
  const currentTheme = currentEvent ? getThemeName(currentEvent) : '–ë–µ–∑ —Ç–µ–º–∞—Ç–∏–∫–∏';

  // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  useEffect(() => {
    if (currentIndex >= events.length - 3 && hasNextPage && !isFetchingNextPage) {
      fetchNextPage();
    }
  }, [currentIndex, events.length, hasNextPage, isFetchingNextPage, fetchNextPage]);

  const handleFilterChange = (theme: ThemeName | null) => {
    setFilteredByTheme(theme);
    setCurrentIndex(0); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –Ω–∞ –ø–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
  };

  if (isLoading) {
    return <LoadingIndicator />;
  }

  if (events.length === 0) {
    return <EmptyState />;
  }

  return (
    <EventsTikTokContainer>
      <DynamicBackground theme={currentTheme} />

      {events.map((event, index) => (
        <EventSlide
          key={event._id}
          event={event}
          isActive={index === currentIndex}
          onIntersect={() => setCurrentIndex(index)}
        />
      ))}

      <SimilarEventsButton
        currentTheme={currentTheme}
        isFiltered={!!filteredByTheme}
        onFilterChange={handleFilterChange}
      />
    </EventsTikTokContainer>
  );
}
```

---

## üé® –°—Ç–∏–ª–∏ (SCSS)

### EventsTikTokContainer.module.scss

```scss
.container {
  position: relative;
  width: 100%;
  height: 100vh;
  overflow-y: scroll;
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  scrollbar-width: none;
  -ms-overflow-style: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

.slidesContainer {
  display: flex;
  flex-direction: column;
  position: relative;
  z-index: 1;
}

.background {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}

// –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
@media (prefers-reduced-motion: reduce) {
  .container {
    scroll-behavior: auto;
  }
}

// –ú–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
@media (max-width: 768px) {
  .container {
    -webkit-overflow-scrolling: touch;
  }
}
```

### EventSlide.module.scss

```scss
.slide {
  width: 100%;
  height: 100vh;
  scroll-snap-align: start;
  scroll-snap-stop: always;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
}
```

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (Accessibility)

- –î–æ–±–∞–≤–∏—Ç—å `aria-label` –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ"
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (—Å—Ç—Ä–µ–ª–∫–∏ –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑)
- –£–≤–∞–∂–µ–Ω–∏–µ –∫ `prefers-reduced-motion`

### SEO

- –î–ª—è SEO –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∞-—Ç–µ–≥–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–±—ã—Ç–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `next/head` –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö meta tags

### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Å–æ–±—ã—Ç–∏–π (–∫–∞–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–æ)
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∏–∫–æ–≤ –Ω–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ"

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- `framer-motion` - –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π
- `@tanstack/react-query` - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `lucide-react` - –¥–ª—è –∏–∫–æ–Ω–æ–∫ –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

---

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- ‚úÖ –ü–ª–∞–≤–Ω—ã–π UX –≤ —Å—Ç–∏–ª–µ TikTok
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ñ–æ–Ω, –∞–¥–∞–ø—Ç–∏—Ä—É—é—â–∏–π—Å—è –∫ —Ç–µ–º–∞—Ç–∏–∫–µ
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫—É
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫—É –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
